-
  In order to test that expected delivery date will be used as scheduled date in delivery order
  I create a Quotation
-
  !record {model: sale.order, id: sale_order_expected_delivery_01}:
    partner_id: base.res_partner_2
    order_policy: 'picking'
    date_expected: '2015-06-28'
    order_line:
      - product_id: stock.product_icecream_product_template
        product_uom_qty: 1
        
-
  I confirm the Quotation with "On Delivery Order" order policy.
-
  !workflow {model: sale.order, action: order_confirm, ref: sale_order_expected_delivery_01}

-
  I check Delivery Order being created, and check if it is using expected delivery date as scheduled date
-
  !python {model: sale.order}: |
    order = self.browse(cr, uid, ref('sale_order_expected_delivery_01'))
    assert order.picking_ids[0].min_date[:10] == order.date_expected, "Delivery Order is not using Sales Order's Expected Delivery Date"
