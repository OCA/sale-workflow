<?xml version="1.0"?>
<odoo>

  <data noupdate="1">

    <record id="action_send_sold_products_mail" model="ir.actions.server">
      <field name="name">Send sold products' mail</field>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="sequence">5</field>
      <field name="state">code</field>
      <field name="code">
        record.send_sold_products_mail()
      </field>
    </record>

    <record id="order_sent" model="base.automation" forcecreate="false">
      <field name="name">Sale done</field>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="sequence">5</field>
      <field name="trigger">on_write</field>
      <field name="filter_pre_domain">['|', ('state', '=', 'draft'), ('state', '=', 'sent')]</field>
      <field name="filter_domain">[('state', '=', 'sale')]</field>
      <field name="state">multi</field>
      <field name="child_ids" eval="[(6,0,[ref('sale_product_email.action_send_sold_products_mail')])]"/>
    </record>

  </data>

</odoo>
