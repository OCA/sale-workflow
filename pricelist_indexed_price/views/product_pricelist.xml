<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_product_pricelist_tree" model="ir.ui.view">
        <field name="model">product.pricelist</field>
        <field name="priority">999</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
            </tree>
        </field>
    </record>
    <record id="view_product_pricelist_form" model="ir.ui.view">
        <field name="model">product.pricelist</field>
        <field name="priority">999</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button type="action" name="%(action_product_pricelist_index_generator)d" string="Generate indexes" class="btn-primary" />
                </header>
                <sheet>
                    <h1><field name="name" /></h1>
                    <div>Fill in your indexation below, 100 is the price on the product</div>
                    <field name="item_ids" context="{'default_applied_on': '3_global', 'default_compute_price': 'percentage'}">
                        <tree editable="bottom">
                            <field name="date_start" required="True" />
                            <field name="date_end" required="True" />
                            <field name="index_price" required="True" />
                            <field name="applied_on" invisible="1" />
                            <field name="compute_price" invisible="1" />
                        </tree>
                    </field>
                </sheet>
            </form>
        </field>
    </record>
    <act_window
        id="action_product_pricelist"
        res_model="product.pricelist"
        view_mode="tree,form"
        view_id="view_product_pricelist_tree"
        name="Price indexes"
        context="{'default_is_index': True}"
        domain="[('is_index', '=', True)]"
    />
    <record id="action_product_pricelist_tree" model="ir.actions.act_window.view">
        <field name="sequence">0</field>
        <field name="view_mode">tree</field>
        <field name="act_window_id" ref="action_product_pricelist" />
        <field name="view_id" ref="view_product_pricelist_tree" />
    </record>
    <record id="action_product_pricelist_form" model="ir.actions.act_window.view">
        <field name="sequence">1</field>
        <field name="view_mode">form</field>
        <field name="act_window_id" ref="action_product_pricelist" />
        <field name="view_id" ref="view_product_pricelist_form" />
    </record>
    <menuitem
        id="menu_product_pricelist"
        parent="account.menu_finance_configuration"
        action="action_product_pricelist"
    />
</odoo>
