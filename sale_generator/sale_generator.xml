<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>  
        
        <record model="ir.ui.view" id="sale_generator_xml_tree">
            <field name="model">sale.generator</field>
                <field name="type">tree</field>
                <field name="arch" type="xml"> 
                <tree string="Partner"> 
                    <field name="name"/>
                    <field name="date"/>
                    <field name="sale_ids"/>
                </tree>
            </field>
        </record>
        
        <record id="act_sale_generator_2_sale_order" model="ir.actions.act_window">
            <field name="name">Sale Order</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,graph</field>
            <field name="context">{'search_default_state':'draft'}</field>
            <field name="domain" > [('generator_id','=',active_id)]</field>
        </record>
        
        <record model="ir.ui.view" id="view_sale_generator_form">
            <field name="model">sale.generator</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <header>
                    <button name="button_confirm" states="draft"
                            string="Confirm" type="object" />
                    <field name="state" widget="statusbar" />
                </header>
                <sheet>
                    <h1>
                        <label string="Generator"/>
                        <field name="name"
                               class="oe_inline"
                               readonly="1"/>
                    </h1>
                    <group col="6">
                        <field name="date" nolabel="2"/>
                        <button class="oe_inline oe_stat_button"
                                name="%(act_sale_generator_2_sale_order)d"
                                type="action" icon="fa-strikethrough"
                                string="Sales"
                                context="{'search_default_state':'draft'}" />
                    </group>
                <field name="partner_ids"/>
                <label string="Line"/>
                <field name="line_ids"
                       string="Line"
                       attrs="{'readonly':[('state', '=','confirmed')]}"/>
                </sheet>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_sale_generator">
            <field name="name">Generator</field>
            <field name="res_model">sale.generator</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>   
        
        <record model="ir.ui.view" id="sale_generator_line_xml_tree">
            <field name="model">sale.line.generator</field>
            <field name="type">tree</field>
            <field name="arch" type="xml"> 
                <tree string="Partner" editable="top"> 
                    <field name="product_id"/>
                    <field name="product_qty"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="sale_generator_line_xml">
            <field name="model">sale.line.generator</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Partner">
                    <group col="4"> 
                        <field name="product_id"/>
                        <field name="product_qty"/>
                    </group> 
                </form>
            </field>
        </record>
            
        <record model="ir.actions.act_window" id="action_sale_generator_line_xml">
            <field name="name">sale</field>
            <field name="res_model">sale.line.generator</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>      
        
        <record model="ir.actions.act_window" id="action_line_sale_order_measure_xml">
            <field name="name">New Sale Order field Measure</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>   
        
        <menuitem name="Generator"
                  id="choix_generator"
                  parent="base.menu_sales"
                  action="action_sale_generator"/>

    </data> 
</openerp>
