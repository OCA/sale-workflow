<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="view_order_tree" model="ir.ui.view">
      <field name="name">sale.order.tree</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_tree" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='amount_total']" position="after">
          <field name="amount_to_invoice" />
        </xpath>
      </field>
    </record>

    <record id="view_order_form" model="ir.ui.view">
      <field name="name">sale.order.form</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form" />
      <field name="arch" type="xml">
        <xpath expr="//page[@string='Other Information']" position="after">
          <page string="Invoices" groups="base.group_user">
            <field name="invoice_ids">
              <tree string="Invoices" version="7.0" editable="bottom" >
                <field name="date_invoice"/>
                <field name="reference" invisible="1"/>
                <field name="number"/>
                <field name="user_id"/>
                <field name="date_due"/>
                <field name="origin"/>
                <field name="currency_id" groups="base.group_multi_currency"/>
                <field name="residual" sum="Residual Amount"/>
                <field name="amount_untaxed" sum="Untaxed Amount"/>
                <field name="amount_total" sum="Total Amount"/>
                <field name="state"/>
              </tree>
            </field>
            <div class="oe_clear" />
            <group class="oe_subtotal_footer oe_right" colspan="2" name="invoice_total">
              <field name="amount_to_invoice" string="Amount to Invoice" widget="monetary" />
            </group>
            <div class="oe_clear"/>
          </page>
        </xpath>
      </field>
    </record>

  </data>
</openerp>
